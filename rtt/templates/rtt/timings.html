{% extends "../mainmenu/base.html" %}

{% block content_title %}Selections{% endblock %}

{% block content_desc %}
<div class="bg-light container"></div>

<form method='POST' action="" enctype="multipart/form-data">
  <p>
  {% csrf_token %}
  {{ form.media.js }}
  {{ form.as_p }}
  <input type="submit" name="submit_input" value="Submit">
  </p>


<!--
<form action="" class="ChooseLocationForm" method="post">
  {% csrf_token %}
  {{ form.as_p }}
</form>
-->

{% endblock %}
{% block content %}

<hr>

<h1>
{{ times.station_name }} @ {{ times.time_of_day }}
</h1>

{% if form.cleaned_data.timetable_choice == "Timetable" %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Dep.</th>
            <th scope="col">Plat.</th>
            <th scope="col">From</th>
            <th scope="col">Destination</th>
            <th scope="col">Operated By</th>
          </tr>
        </thead>
        <tbody>
            {% for d in times.departures.all %}
          <tr>
            <td>{{d.aimed_departure_time }}</td>
            <td>{{d.platform}}</td>
            <td>{{d.origin_name}}</td>
            <td>{{d.destination_name}}</td>
            <td>{{d.operator_name}}</td>
            {% empty %}
            <li>No Departure Times available.</li>
            {% endfor %}
          </tr>
        </tbody>
      </table>
{% else %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">UID</th>
            <th scope="col">Service</th>
            <th scope="col">Arr.</th>
            <th scope="col">Dep.</th>
            <th scope="col">Pass.</th>
            <th scope="col">Origin</th>
            <th scope="col">Destination</th>
            <th scope="col">Latest Status</th>
            <th scope="col">Operated By</th>
          </tr>
        </thead>
          <tbody>
            {% for l in times.updates.all %}
            <tr>
                <td><a href="{% url 'rtt:getservice' l.train_uid  %}"> {{ l.train_uid }}</a></td>
                <td>{{l.service}}</td>
                <td>{{l.aimed_arrival_time }} </td>
                <td>{{l.aimed_departure_time }}</td>
                <td>{{l.aimed_pass_time }}</td>
                <td>{{l.origin_name}}</td>
                <td>{{l.destination_name}}</td>
                <td>{{l.status}}</td>
                <td>{{l.operator_name}}</td>
            {% empty %}
                <h3>No data available for these selections</h3>
            {% endfor %}
            </tr>
          </tbody>
      </table>

{% endif %}

{% endblock content %}