{% extends "../mainmenu/base.html" %}

{% block content_title %}{{ loco_class }}{% endblock %}
{% block content_desc %}{% endblock %}

{% block content %}
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <small>
        </small>
      </div>

      <div class="panel-body">
      {% autoescape off %}
      {{wikipedia_summary}}
      {% endautoescape %}

      <!-- Template tags https://docs.djangoproject.com/en/2.0/howto/custom-template-tags/ -->
      <!-- Template tags https://stackoverflow.com/questions/2217478/django-templates-loop-through-and-print-all-available-properties-of-an-object -->     
      {% load my_tags %}
      <ul>
      {% for key, val in loco_class|get_fields %}
        {% if val %}
          <li>{{ key }}: {{ val }}</li>
        {% endif %}
      {% endfor %}
      </ul>
    </div>

    <h2>Locos in Class</h2>
    {% for locomotive in locomotives %}
      <li>{{locomotive}}</li>
    {% empty %}
      <li>None recorded for this class.</li>
    {% endfor %} 

      <h2>Owners/Operators</h2>
      {% for operator in operators %}
        <li><a href="https://en.wikipedia.org//{{operator.wikislug}}">{{operator.name}}{{operator.wikislug}}</a></li>
      {% empty %}
        <li>None recorded for this class.</li>
      {% endfor %} 

      <h2>Designer(s)</h2>
      {% for designer in designers1 %}
        <li><a href="https://en.wikipedia.org/{{designer.wikitextslug}}">{{designer.name}}</a></li>
      {% endfor %}
      {% for designer in designers2 %}
        <li><a href="https://en.wikipedia.org/{{designer.wikislug}}">{{designer.name}}</a></li>
      {% endfor %}
      {% for designer in designers3 %}
        <li><a href="https://en.wikipedia.org/{{designer.wikislug}}">{{designer.name}}</a></li>
      {% endfor %}


      <h2>Builder(s)</h2>
      {% for builder in builders1 %}
        <li><a href="https://en.wikipedia.org/{{builder.wikitextslug}}">{{builder.name}}</a></li>
      {% endfor %}
      {% for builder in builders2 %}
      <li><a href="https://en.wikipedia.org/{{builder.wikislug}}">{{builder.name}}</a></li>
      {% endfor %}
      {% for builder in builders3 %}
      <li><a href="https://en.wikipedia.org/{{builder.wikislug}}">{{builder.name}}</a></li>
      {% endfor %}

      <h2>References</h2>
      {% for reference in references %}
        {% autoescape off %}
        <li>{{reference.citation}}</li>
        {% endautoescape %}
      {% empty %}
        <li>None recorded for this class.</li>
      {% endfor %}

      <h2>Images</h2>
      {% for image in images %}
        <img src="{{ image.image.url }}" >
        <p><a href="{% url 'locos:image' image.id %}">{{image.image_name}}</a></p>
      {% empty %}
        <li>None available for this class.</li>
      {% endfor %} 

    </div> <!-- panel -->

{% endblock content %}