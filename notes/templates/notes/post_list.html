{% extends "mainmenu/base.html" %}

{% block content %}

<h2>Posts</h2>

<form method="get" class="mb-3">
    <div class="row g-2 align-items-end">

        <div class="col-auto">
            {{ form.topic.label_tag }}
            {{ form.topic }}
        </div>

        <div class="col-auto">
            <button type="submit" class="btn btn-primary">
                Filter
            </button>
        </div>

        {% if request.GET.topic %}
        <div class="col-auto">
            <a href="{% url 'notes:post_list' %}" class="btn btn-secondary">
                Reset
            </a>
        </div>
        {% endif %}

    </div>
</form>

<hr>

<ul class="list-group">
    {% for post in posts %}
        <li class="list-group-item">
            <a href="{{ post.id }}">{{ post.title }}</a>
            <br>
            <small class="text-muted">
                Topic: {{ post.topic }} • {{ post.publish|date:"d M Y" }}
            </small>
        </li>
    {% empty %}
        <li class="list-group-item">No posts found for this topic.</li>
    {% endfor %}
</ul>

{% endblock %}

